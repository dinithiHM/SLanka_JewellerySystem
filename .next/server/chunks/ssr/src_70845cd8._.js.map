{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/JewelleryWEBApp/front_end/src/components/icons/LKRIcon.tsx"],"sourcesContent":["import React from 'react';\n\ninterface LKRIconProps {\n  className?: string;\n  size?: number;\n}\n\nconst LKRIcon: React.FC<LKRIconProps> = ({ className = \"\", size = 24 }) => {\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\" \n      className={`lucide lucide-currency-rupee ${className}`}\n    >\n      <path d=\"M6 3h12\" />\n      <path d=\"M6 8h12\" />\n      <path d=\"m6 13 8.5 8\" />\n      <path d=\"M6 13h3\" />\n      <path d=\"M9 13c6.667 0 6.667-10 0-10\" />\n    </svg>\n  );\n};\n\nexport default LKRIcon;\n"],"names":[],"mappings":";;;;;AAOA,MAAM,UAAkC,CAAC,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,EAAE;IACpE,qBACE,8OAAC;QACC,OAAM;QACN,OAAO;QACP,QAAQ;QACR,SAAQ;QACR,MAAK;QACL,QAAO;QACP,aAAY;QACZ,eAAc;QACd,gBAAe;QACf,WAAW,CAAC,6BAA6B,EAAE,WAAW;;0BAEtD,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAK,GAAE;;;;;;;;;;;;AAGd;uCAEe","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file://D%3A/JewelleryWEBApp/front_end/src/utils/formatters.ts"],"sourcesContent":["/**\n * Format a number as currency\n * @param value The number to format\n * @param locale The locale to use for formatting (default: 'en-US')\n * @param currency The currency code (default: 'LKR')\n * @returns Formatted currency string\n */\nexport const formatCurrency = (\n  value: number | string,\n  locale: string = 'en-US',\n  currency: string = 'LKR'\n): string => {\n  // Convert to number if it's a string\n  const numericValue = typeof value === 'string' ? parseFloat(value) : value;\n\n  // Handle NaN values\n  if (isNaN(numericValue)) {\n    console.warn('Invalid value for currency formatting:', value);\n    return 'Rs. 0.00';\n  }\n\n  // Use the Sri Lankan Rupee symbol (Rs) instead of LKR text\n  return 'Rs. ' + new Intl.NumberFormat(locale, {\n    style: 'decimal',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(numericValue);\n};\n\n/**\n * Format a date string\n * @param dateString The date string to format\n * @param locale The locale to use for formatting (default: 'en-US')\n * @returns Formatted date string\n */\nexport const formatDate = (\n  dateString: string,\n  locale: string = 'en-US'\n): string => {\n  const date = new Date(dateString);\n  return new Intl.DateTimeFormat(locale, {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    hour12: true\n  }).format(date);\n};\n"],"names":[],"mappings":"AAAA;;;;;;CAMC;;;;AACM,MAAM,iBAAiB,CAC5B,OACA,SAAiB,OAAO,EACxB,WAAmB,KAAK;IAExB,qCAAqC;IACrC,MAAM,eAAe,OAAO,UAAU,WAAW,WAAW,SAAS;IAErE,oBAAoB;IACpB,IAAI,MAAM,eAAe;QACvB,QAAQ,IAAI,CAAC,0CAA0C;QACvD,OAAO;IACT;IAEA,2DAA2D;IAC3D,OAAO,SAAS,IAAI,KAAK,YAAY,CAAC,QAAQ;QAC5C,OAAO;QACP,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAQO,MAAM,aAAa,CACxB,YACA,SAAiB,OAAO;IAExB,MAAM,OAAO,IAAI,KAAK;IACtB,OAAO,IAAI,KAAK,cAAc,CAAC,QAAQ;QACrC,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;QACR,QAAQ;IACV,GAAG,MAAM,CAAC;AACZ","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file://D%3A/JewelleryWEBApp/front_end/src/app/DashView/advance-payment/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport {\r\n  CreditCard,\r\n  Package,\r\n  ShoppingBag,\r\n  User,\r\n  FileText,\r\n  CheckCircle,\r\n  X\r\n} from 'lucide-react';\r\nimport LKRIcon from '@/components/icons/LKRIcon';\r\nimport { formatCurrency } from '@/utils/formatters';\r\n\r\n// Define types\r\ninterface JewelleryItem {\r\n  item_id: number;\r\n  product_title: string;\r\n  category: string;\r\n  selling_price: number;\r\n  in_stock: number;\r\n}\r\n\r\ninterface CustomOrder {\r\n  order_id: number;\r\n  order_reference: string;\r\n  customer_name: string;\r\n  total_amount: number;\r\n  estimated_amount?: number;\r\n  advance_amount?: number;\r\n  balance_amount?: number;\r\n  status: string;\r\n  payment_status?: string;\r\n  customer_phone?: string;\r\n  customer_email?: string;\r\n  description?: string;\r\n  special_requirements?: string;\r\n  actual_advance_amount?: number;\r\n  actual_balance_amount?: number;\r\n}\r\n\r\n// Payment type enum\r\nenum PaymentType {\r\n  INVENTORY_ITEM = 'inventory_item',\r\n  CUSTOM_ORDER = 'custom_order'\r\n}\r\n\r\nconst AdvancePaymentPage = () => {\r\n  const router = useRouter();\r\n\r\n  // State for form fields\r\n  const [paymentType, setPaymentType] = useState<PaymentType>(PaymentType.INVENTORY_ITEM);\r\n  const [customerName, setCustomerName] = useState('');\r\n  const [totalAmount, setTotalAmount] = useState<number>(0);\r\n  const [advanceAmount, setAdvanceAmount] = useState<number>(0);\r\n  const [balanceAmount, setBalanceAmount] = useState<number>(0);\r\n  const [paymentMethod, setPaymentMethod] = useState('Cash');\r\n  const [notes, setNotes] = useState('');\r\n  const [quantity, setQuantity] = useState<number>(1);\r\n\r\n  // State for selected items\r\n  const [selectedItemId, setSelectedItemId] = useState<number | null>(null);\r\n  const [selectedOrderId, setSelectedOrderId] = useState<number | null>(null);\r\n\r\n  // State for data\r\n  const [availableItems, setAvailableItems] = useState<JewelleryItem[]>([]);\r\n  const [customOrders, setCustomOrders] = useState<CustomOrder[]>([]);\r\n  const [selectedItem, setSelectedItem] = useState<JewelleryItem | null>(null);\r\n  const [selectedOrder, setSelectedOrder] = useState<CustomOrder | null>(null);\r\n  const [categories, setCategories] = useState<string[]>([]);\r\n  const [selectedCategory, setSelectedCategory] = useState<string>('');\r\n  const [filteredItems, setFilteredItems] = useState<JewelleryItem[]>([]);\r\n\r\n  // State for UI\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n  const [paymentReference, setPaymentReference] = useState<string | null>(null);\r\n\r\n  // Check for URL query parameters\r\n  useEffect(() => {\r\n    // Get the URL search params\r\n    const searchParams = new URLSearchParams(window.location.search);\r\n    const typeParam = searchParams.get('type');\r\n\r\n    // Handle custom order parameters\r\n    if (typeParam === 'custom') {\r\n      const orderIdParam = searchParams.get('order_id');\r\n      if (orderIdParam) {\r\n        // If order ID is in URL, set payment type to custom order\r\n        setPaymentType(PaymentType.CUSTOM_ORDER);\r\n        console.log(`Custom order ID found in URL: ${orderIdParam}`);\r\n\r\n        // Wait for custom orders to load before selecting\r\n        const checkAndSelectOrder = () => {\r\n          if (customOrders.length > 0) {\r\n            const orderId = parseInt(orderIdParam);\r\n            setSelectedOrderId(orderId);\r\n\r\n            // Scroll to the payment form\r\n            const paymentForm = document.getElementById('payment-form');\r\n            if (paymentForm) {\r\n              paymentForm.scrollIntoView({ behavior: 'smooth' });\r\n            }\r\n          } else {\r\n            // If custom orders not loaded yet, try again in 500ms\r\n            setTimeout(checkAndSelectOrder, 500);\r\n          }\r\n        };\r\n\r\n        checkAndSelectOrder();\r\n      }\r\n    }\r\n    // Handle inventory item parameters\r\n    else if (typeParam === 'inventory') {\r\n      setPaymentType(PaymentType.INVENTORY_ITEM);\r\n\r\n      const itemIdParam = searchParams.get('item_id');\r\n      const customerNameParam = searchParams.get('customer_name');\r\n      const totalAmountParam = searchParams.get('total_amount');\r\n      const balanceParam = searchParams.get('balance');\r\n      const advanceParam = searchParams.get('advance');\r\n      const paymentIdParam = searchParams.get('payment_id');\r\n      const quantityParam = searchParams.get('quantity');\r\n\r\n      console.log(`Inventory item parameters found in URL: item_id=${itemIdParam}, customer=${customerNameParam}`);\r\n\r\n      // Set customer name if provided\r\n      if (customerNameParam) {\r\n        setCustomerName(customerNameParam);\r\n      }\r\n\r\n      // Set total amount if provided\r\n      if (totalAmountParam) {\r\n        setTotalAmount(parseFloat(totalAmountParam));\r\n      }\r\n\r\n      // Set quantity if provided\r\n      if (quantityParam) {\r\n        const qty = parseInt(quantityParam);\r\n        if (qty > 0) {\r\n          setQuantity(qty);\r\n        }\r\n      }\r\n\r\n      // Set up for additional payments\r\n      // If we have both balance and advance, use them to calculate the correct amount\r\n      if (balanceParam && advanceParam) {\r\n        // Get the remaining balance and previous advance\r\n        const balance = parseFloat(balanceParam);\r\n        const previousAdvance = parseFloat(advanceParam);\r\n\r\n        // For additional payments, we set advance amount to 0 (empty field for user to enter)\r\n        setAdvanceAmount(0);\r\n\r\n        // Set the balance to the remaining balance\r\n        setBalanceAmount(balance);\r\n\r\n        console.log(`Setting advance amount to 0 and balance to remaining balance: ${balance}`);\r\n        console.log(`Previous advance payment: ${previousAdvance}`);\r\n      }\r\n\r\n      // Add note about the previous payment\r\n      if (paymentIdParam && advanceParam) {\r\n        const previousAdvance = parseFloat(advanceParam);\r\n        setNotes(`Additional payment for previous payment ID: ${paymentIdParam}. Previous advance payment: ${previousAdvance.toFixed(2)}`);\r\n      } else if (paymentIdParam) {\r\n        setNotes(`Additional payment for previous payment ID: ${paymentIdParam}`);\r\n      }\r\n\r\n      // Wait for items to load before selecting\r\n      if (itemIdParam) {\r\n        const checkAndSelectItem = () => {\r\n          if (availableItems.length > 0) {\r\n            const itemId = parseInt(itemIdParam);\r\n\r\n            // Find the item to get its category\r\n            const item = availableItems.find(i => i.item_id === itemId);\r\n            if (item) {\r\n              // Set the category first\r\n              setSelectedCategory(item.category);\r\n\r\n              // Then set the item ID after a short delay to ensure the filtered items are updated\r\n              setTimeout(() => {\r\n                setSelectedItemId(itemId);\r\n\r\n                // Scroll to the payment form\r\n                const paymentForm = document.getElementById('payment-form');\r\n                if (paymentForm) {\r\n                  paymentForm.scrollIntoView({ behavior: 'smooth' });\r\n                }\r\n              }, 100);\r\n            }\r\n          } else {\r\n            // If items not loaded yet, try again in 500ms\r\n            setTimeout(checkAndSelectItem, 500);\r\n          }\r\n        };\r\n\r\n        checkAndSelectItem();\r\n      }\r\n    }\r\n    // Legacy support for old URL format\r\n    else {\r\n      const orderIdParam = searchParams.get('order');\r\n      if (orderIdParam) {\r\n        setPaymentType(PaymentType.CUSTOM_ORDER);\r\n        console.log(`Legacy order ID found in URL: ${orderIdParam}`);\r\n\r\n        // Wait for custom orders to load before selecting\r\n        const checkAndSelectOrder = () => {\r\n          if (customOrders.length > 0) {\r\n            const orderId = parseInt(orderIdParam);\r\n            setSelectedOrderId(orderId);\r\n\r\n            // Scroll to the payment form\r\n            const paymentForm = document.getElementById('payment-form');\r\n            if (paymentForm) {\r\n              paymentForm.scrollIntoView({ behavior: 'smooth' });\r\n            }\r\n          } else {\r\n            // If custom orders not loaded yet, try again in 500ms\r\n            setTimeout(checkAndSelectOrder, 500);\r\n          }\r\n        };\r\n\r\n        checkAndSelectOrder();\r\n      }\r\n    }\r\n  }, [customOrders, availableItems]);\r\n\r\n  // Fetch available items and custom orders on component mount\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Fetch available items\r\n        const itemsResponse = await fetch('http://localhost:3002/advance-payments/items/available');\r\n        if (itemsResponse.ok) {\r\n          const itemsData = await itemsResponse.json();\r\n          setAvailableItems(itemsData);\r\n\r\n          // Fetch categories from the database instead of extracting from items\r\n          try {\r\n            const categoriesResponse = await fetch('http://localhost:3002/categories');\r\n            if (categoriesResponse.ok) {\r\n              const categoriesData = await categoriesResponse.json();\r\n              // Extract category names from the response\r\n              const categoryNames = categoriesData.map((cat: any) => cat.category_name);\r\n              console.log('Fetched categories from database:', categoryNames);\r\n              setCategories(categoryNames);\r\n\r\n              if (categoryNames.length > 0) {\r\n                setSelectedCategory(categoryNames[0]);\r\n              }\r\n            } else {\r\n              // Fallback to extracting from items if API fails\r\n              console.warn('Failed to fetch categories, falling back to item categories');\r\n              const uniqueCategories = Array.from(new Set(itemsData.map((item: JewelleryItem) => item.category))) as string[];\r\n              setCategories(uniqueCategories);\r\n              if (uniqueCategories.length > 0) {\r\n                setSelectedCategory(uniqueCategories[0]);\r\n              }\r\n            }\r\n          } catch (catErr) {\r\n            console.error('Error fetching categories:', catErr);\r\n            // Fallback to extracting from items\r\n            const uniqueCategories = Array.from(new Set(itemsData.map((item: JewelleryItem) => item.category))) as string[];\r\n            setCategories(uniqueCategories);\r\n            if (uniqueCategories.length > 0) {\r\n              setSelectedCategory(uniqueCategories[0]);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Fetch custom orders\r\n        const ordersResponse = await fetch('http://localhost:3002/advance-payments/orders/custom');\r\n        if (ordersResponse.ok) {\r\n          const ordersData = await ordersResponse.json();\r\n\r\n          // The backend now filters out completed orders\r\n          setCustomOrders(ordersData);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching data:', err);\r\n        setError('Failed to load data. Please try again.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Filter items by selected category\r\n  useEffect(() => {\r\n    if (selectedCategory) {\r\n      const filtered = availableItems.filter(item => item.category === selectedCategory);\r\n      setFilteredItems(filtered);\r\n    } else {\r\n      setFilteredItems(availableItems);\r\n    }\r\n  }, [selectedCategory, availableItems]);\r\n\r\n  // Update selected item when item ID changes\r\n  useEffect(() => {\r\n    if (selectedItemId) {\r\n      const item = availableItems.find(item => item.item_id === selectedItemId);\r\n      setSelectedItem(item || null);\r\n\r\n      if (item) {\r\n        // Calculate total amount based on item price and quantity\r\n        const total = item.selling_price * quantity;\r\n        setTotalAmount(total);\r\n      }\r\n    } else {\r\n      setSelectedItem(null);\r\n    }\r\n  }, [selectedItemId, availableItems, quantity]);\r\n\r\n  // Update selected order when order ID changes\r\n  useEffect(() => {\r\n    if (selectedOrderId) {\r\n      // First, find the order in the customOrders array\r\n      const order = customOrders.find(order => order.order_id === selectedOrderId);\r\n\r\n      if (order) {\r\n        console.log('Selected order from dropdown:', order);\r\n\r\n        // Set customer name from the order\r\n        setCustomerName(order.customer_name);\r\n\r\n        // Set total amount from the estimated amount\r\n        if (order.estimated_amount) {\r\n          const totalAmt = typeof order.estimated_amount === 'string' ?\r\n            parseFloat(order.estimated_amount) : order.estimated_amount;\r\n          setTotalAmount(totalAmt);\r\n          console.log(`Set total amount to ${totalAmt}`);\r\n        }\r\n\r\n        // Fetch the complete order details from the server to get accurate payment information\r\n        fetchOrderDetails(selectedOrderId);\r\n      } else {\r\n        setSelectedOrder(null);\r\n      }\r\n    } else {\r\n      setSelectedOrder(null);\r\n    }\r\n  }, [selectedOrderId, customOrders]);\r\n\r\n  // Function to fetch more details about a custom order\r\n  const fetchOrderDetails = async (orderId: number) => {\r\n    try {\r\n      // First, fetch the basic order details\r\n      const response = await fetch(`http://localhost:3002/custom-orders/${orderId}`);\r\n      if (response.ok) {\r\n        const orderDetails = await response.json();\r\n        console.log('Fetched order details from server:', orderDetails);\r\n\r\n        // Update the selected order with the accurate data from the server\r\n        setSelectedOrder(orderDetails);\r\n\r\n        // Now fetch the payment history to get the most accurate payment information\r\n        try {\r\n          const historyResponse = await fetch(`http://localhost:3002/advance-payments/history/order/${orderId}`);\r\n          if (historyResponse.ok) {\r\n            const historyData = await historyResponse.json();\r\n            console.log('Fetched payment history from server:', historyData);\r\n\r\n            if (historyData && historyData.total_paid !== undefined) {\r\n              // Update the order details with the accurate payment information from history\r\n              const updatedOrderDetails = {\r\n                ...orderDetails,\r\n                actual_advance_amount: historyData.total_paid,\r\n                actual_balance_amount: historyData.remaining_balance\r\n              };\r\n\r\n              console.log('Updated order details with payment history:', updatedOrderDetails);\r\n              setSelectedOrder(updatedOrderDetails);\r\n\r\n              // Update the balance amount field with the correct remaining balance\r\n              setBalanceAmount(historyData.remaining_balance);\r\n              console.log(`Setting balance from payment history: ${historyData.remaining_balance}`);\r\n\r\n              // Add payment history information to notes\r\n              let paymentNotes = '';\r\n              if (historyData.payments && historyData.payments.length > 0) {\r\n                paymentNotes = `Previous Payments:\\n`;\r\n                historyData.payments.forEach((payment: any, index: number) => {\r\n                  paymentNotes += `${index + 1}. ${payment.payment_reference}: ${formatCurrency(payment.advance_amount)} (${new Date(payment.payment_date).toLocaleDateString()})\\n`;\r\n                });\r\n\r\n                if (orderDetails.description) {\r\n                  paymentNotes += `\\nDescription: ${orderDetails.description}\\n`;\r\n                }\r\n                if (orderDetails.special_requirements) {\r\n                  paymentNotes += `Special Requirements: ${orderDetails.special_requirements}\\n`;\r\n                }\r\n\r\n                setNotes(paymentNotes);\r\n              }\r\n\r\n              return; // Skip the standard calculation below since we have accurate data\r\n            }\r\n          }\r\n        } catch (historyErr) {\r\n          console.error('Error fetching payment history:', historyErr);\r\n          // Continue with standard calculation if history fetch fails\r\n        }\r\n\r\n        // If payment history fetch failed or didn't have the data we need,\r\n        // fall back to the standard calculation using order details\r\n        if (orderDetails.advance_amount && orderDetails.advance_amount > 0) {\r\n          const advanceAmount = typeof orderDetails.advance_amount === 'string' ?\r\n            parseFloat(orderDetails.advance_amount) : orderDetails.advance_amount;\r\n\r\n          console.log(`Server reports this order has an advance payment of ${advanceAmount}`);\r\n\r\n          // Calculate the remaining balance (total - advance)\r\n          const totalAmt = typeof orderDetails.estimated_amount === 'string' ?\r\n            parseFloat(orderDetails.estimated_amount) : (orderDetails.estimated_amount || 0);\r\n\r\n          const remainingBalance = totalAmt - advanceAmount;\r\n          console.log(`Server calculation: Total: ${totalAmt}, Advance: ${advanceAmount}, Remaining: ${remainingBalance}`);\r\n\r\n          // Update the balance amount field with the server's calculation\r\n          setBalanceAmount(remainingBalance);\r\n        }\r\n\r\n        // Add any notes about the order\r\n        let orderNotes = '';\r\n        if (orderDetails.description) {\r\n          orderNotes += `Description: ${orderDetails.description}\\n`;\r\n        }\r\n        if (orderDetails.special_requirements) {\r\n          orderNotes += `Special Requirements: ${orderDetails.special_requirements}\\n`;\r\n        }\r\n        if (orderNotes) {\r\n          setNotes(orderNotes);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching order details:', err);\r\n    }\r\n  };\r\n\r\n  // Add a special effect to handle the initial setup for inventory items with existing payments\r\n  useEffect(() => {\r\n    const paymentIdParam = new URLSearchParams(window.location.search).get('payment_id');\r\n    const balanceParam = new URLSearchParams(window.location.search).get('balance');\r\n    const advanceParam = new URLSearchParams(window.location.search).get('advance');\r\n    const totalAmountParam = new URLSearchParams(window.location.search).get('total_amount');\r\n\r\n    if (paymentIdParam && balanceParam && paymentType === PaymentType.INVENTORY_ITEM) {\r\n      // This is for an inventory item with an existing payment\r\n      const remainingBalance = parseFloat(balanceParam);\r\n      const totalAmount = totalAmountParam ? parseFloat(totalAmountParam) : 0;\r\n      const previousAdvance = advanceParam ? parseFloat(advanceParam) : 0;\r\n\r\n      console.log(`Initial setup for inventory item with payment ID ${paymentIdParam}:`);\r\n      console.log(`Total amount: ${totalAmount}, Previous advance: ${previousAdvance}, Remaining balance: ${remainingBalance}`);\r\n\r\n      // Set the advance amount to 0 (empty field for user to enter)\r\n      setAdvanceAmount(0);\r\n\r\n      // Set the balance to the remaining balance\r\n      setBalanceAmount(remainingBalance);\r\n\r\n      console.log(`Setting advance amount to 0`);\r\n      console.log(`Setting balance amount to remaining balance: ${remainingBalance}`);\r\n\r\n      // Force update the form fields after a short delay to ensure they're set correctly\r\n      setTimeout(() => {\r\n        const advanceInput = document.getElementById('advanceAmount') as HTMLInputElement;\r\n        const balanceInput = document.getElementById('balanceAmount') as HTMLInputElement;\r\n\r\n        if (advanceInput && balanceInput) {\r\n          console.log('Directly updating form fields');\r\n          advanceInput.value = '0';\r\n          balanceInput.value = remainingBalance.toString();\r\n        }\r\n      }, 500);\r\n    }\r\n  }, []); // Empty dependency array means this runs once on mount\r\n\r\n  // Calculate balance amount when total or advance amount changes\r\n  useEffect(() => {\r\n    // Check if this is an additional payment for an inventory item\r\n    const paymentIdParam = new URLSearchParams(window.location.search).get('payment_id');\r\n    const balanceParam = new URLSearchParams(window.location.search).get('balance');\r\n\r\n    if (paymentType === PaymentType.INVENTORY_ITEM && paymentIdParam && balanceParam) {\r\n      // This is an additional payment for an inventory item\r\n      // For inventory items with existing payments, we don't auto-update the balance\r\n      // This matches the custom order behavior\r\n      const remainingBalance = parseFloat(balanceParam);\r\n      console.log(`For inventory item with existing payment, keeping balance at: ${remainingBalance}`);\r\n\r\n      // Only set the balance once when the component mounts\r\n      if (advanceAmount === 0) {\r\n        setBalanceAmount(remainingBalance);\r\n      }\r\n    }\r\n    // If this is a custom order with existing advance payment, account for it\r\n    else if (selectedOrder && selectedOrder.advance_amount && selectedOrder.advance_amount > 0) {\r\n      // Get the existing advance amount from the server data\r\n      const existingAdvance = typeof selectedOrder.advance_amount === 'string' ?\r\n        parseFloat(selectedOrder.advance_amount) : selectedOrder.advance_amount;\r\n\r\n      // Get the total amount\r\n      const totalAmt = typeof selectedOrder.estimated_amount === 'string' ?\r\n        parseFloat(selectedOrder.estimated_amount) : (selectedOrder.estimated_amount || 0);\r\n\r\n      // For custom orders, we don't auto-update the balance when the advance amount changes\r\n      // Only set it once when the component mounts\r\n      if (advanceAmount === 0) {\r\n        const remainingBalance = totalAmt - existingAdvance;\r\n        setBalanceAmount(remainingBalance);\r\n        console.log(`Setting initial balance for custom order: ${totalAmt} - ${existingAdvance} = ${remainingBalance}`);\r\n      }\r\n    } else {\r\n      // Normal calculation for new payments\r\n      setBalanceAmount(totalAmount - advanceAmount);\r\n      console.log(`Standard balance calculation: ${totalAmount} - ${advanceAmount} = ${totalAmount - advanceAmount}`);\r\n    }\r\n  }, [totalAmount, advanceAmount, selectedOrder, paymentType]);\r\n\r\n  // Handle payment type change\r\n  const handlePaymentTypeChange = (type: PaymentType) => {\r\n    setPaymentType(type);\r\n    // Reset selections\r\n    setSelectedItemId(null);\r\n    setSelectedOrderId(null);\r\n    setCustomerName('');\r\n    setTotalAmount(0);\r\n    setAdvanceAmount(0);\r\n    setQuantity(1);\r\n  };\r\n\r\n  // Handle category change\r\n  const handleCategoryChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    setSelectedCategory(e.target.value);\r\n    setSelectedItemId(null);\r\n  };\r\n\r\n  // Handle item selection\r\n  const handleItemChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const itemId = parseInt(e.target.value);\r\n    setSelectedItemId(itemId);\r\n  };\r\n\r\n  // Handle order selection\r\n  const handleOrderChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const orderId = parseInt(e.target.value);\r\n    setSelectedOrderId(orderId);\r\n  };\r\n\r\n  // Handle quantity change\r\n  const handleQuantityChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const qty = parseInt(e.target.value);\r\n    if (qty > 0) {\r\n      setQuantity(qty);\r\n\r\n      // Update total amount if item is selected\r\n      if (selectedItem) {\r\n        setTotalAmount(selectedItem.selling_price * qty);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    // Validate form\r\n    if (!customerName.trim()) {\r\n      setError('Please enter customer name');\r\n      return;\r\n    }\r\n\r\n    if (totalAmount <= 0) {\r\n      setError('Total amount must be greater than zero');\r\n      return;\r\n    }\r\n\r\n    if (advanceAmount <= 0) {\r\n      setError('Advance amount must be greater than zero');\r\n      return;\r\n    }\r\n\r\n    if (advanceAmount > totalAmount) {\r\n      setError('Advance amount cannot be greater than total amount');\r\n      return;\r\n    }\r\n\r\n    if (paymentType === PaymentType.INVENTORY_ITEM && !selectedItemId) {\r\n      setError('Please select an item');\r\n      return;\r\n    }\r\n\r\n    if (paymentType === PaymentType.CUSTOM_ORDER && !selectedOrderId) {\r\n      setError('Please select a custom order');\r\n      return;\r\n    }\r\n\r\n    // Get user info from localStorage\r\n    const userId = localStorage.getItem('userId');\r\n    const branchId = localStorage.getItem('branchId');\r\n\r\n    // Prepare data for submission\r\n    const paymentData: any = {\r\n      customer_name: customerName,\r\n      total_amount: totalAmount,\r\n      advance_amount: advanceAmount,\r\n      payment_method: paymentMethod,\r\n      notes,\r\n      created_by: userId ? parseInt(userId) : null,\r\n      branch_id: branchId ? parseInt(branchId) : null,\r\n      is_custom_order: paymentType === PaymentType.CUSTOM_ORDER,\r\n      order_id: paymentType === PaymentType.CUSTOM_ORDER ? parseInt(selectedOrderId as unknown as string) : null,\r\n      item_id: paymentType === PaymentType.INVENTORY_ITEM ? selectedItemId : null,\r\n      item_quantity: paymentType === PaymentType.INVENTORY_ITEM ? quantity : null\r\n    };\r\n\r\n    // Check if this is an additional payment for an inventory item\r\n    const paymentIdParam = new URLSearchParams(window.location.search).get('payment_id');\r\n    const advanceParam = new URLSearchParams(window.location.search).get('advance');\r\n    const balanceParam = new URLSearchParams(window.location.search).get('balance');\r\n\r\n    if (paymentType === PaymentType.INVENTORY_ITEM && paymentIdParam && advanceParam && balanceParam) {\r\n      // This is an additional payment for an inventory item\r\n      const previousAdvance = parseFloat(advanceParam);\r\n      const remainingBalance = parseFloat(balanceParam);\r\n\r\n      // Include the existing payment ID and advance amount\r\n      paymentData.previous_payment_id = parseInt(paymentIdParam);\r\n      paymentData.existing_advance_amount = previousAdvance;\r\n      console.log(`Including existing advance amount for inventory item: ${previousAdvance}`);\r\n\r\n      // Calculate the new balance amount: remaining balance - new advance\r\n      const calculatedBalance = remainingBalance - advanceAmount;\r\n      paymentData.balance_amount = calculatedBalance;\r\n      console.log(`Calculated balance for inventory item: ${remainingBalance} - ${advanceAmount} = ${calculatedBalance}`);\r\n    }\r\n    // If this is a custom order with existing advance payment, include it\r\n    else if (paymentType === PaymentType.CUSTOM_ORDER && selectedOrder?.advance_amount) {\r\n      const existingAdvance = typeof selectedOrder.advance_amount === 'string' ?\r\n        parseFloat(selectedOrder.advance_amount) : selectedOrder.advance_amount;\r\n\r\n      // Include the existing advance amount from the server\r\n      paymentData.existing_advance_amount = existingAdvance;\r\n      console.log(`Including existing advance amount from server: ${existingAdvance}`);\r\n\r\n      // Get the total amount from the server data\r\n      const totalAmt = typeof selectedOrder.estimated_amount === 'string' ?\r\n        parseFloat(selectedOrder.estimated_amount) : (selectedOrder.estimated_amount || 0);\r\n\r\n      // Calculate the balance amount: total - (existing + new)\r\n      const calculatedBalance = totalAmt - (existingAdvance + advanceAmount);\r\n      paymentData.balance_amount = calculatedBalance;\r\n      console.log(`Calculated balance for submission: ${totalAmt} - (${existingAdvance} + ${advanceAmount}) = ${calculatedBalance}`);\r\n    } else {\r\n      // Standard calculation for new payments\r\n      paymentData.balance_amount = totalAmount - advanceAmount;\r\n      console.log(`Standard balance calculation for submission: ${totalAmount} - ${advanceAmount} = ${paymentData.balance_amount}`);\r\n    }\r\n\r\n    // Log the data being sent\r\n    console.log('Sending payment data:', paymentData);\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:3002/advance-payments/create', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(paymentData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Failed to create advance payment');\r\n      }\r\n\r\n      const result = await response.json();\r\n\r\n      // Show success message\r\n      setSuccess('Advance payment created successfully!');\r\n      setPaymentReference(result.payment_reference);\r\n      setShowSuccessModal(true);\r\n\r\n      // Reset form after successful submission\r\n      if (paymentType === PaymentType.INVENTORY_ITEM) {\r\n        setSelectedItemId(null);\r\n        setQuantity(1);\r\n      } else {\r\n        setSelectedOrderId(null);\r\n      }\r\n\r\n      setCustomerName('');\r\n      setTotalAmount(0);\r\n      setAdvanceAmount(0);\r\n      setNotes('');\r\n\r\n    } catch (err) {\r\n      console.error('Error creating advance payment:', err);\r\n      setError(err instanceof Error ? err.message : 'An error occurred while creating the advance payment');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle cancel button\r\n  const handleCancel = () => {\r\n    router.back();\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-6xl mx-auto\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-gray-800\">Advance Payment</h1>\r\n        <div className=\"flex space-x-2\">\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center\"\r\n            title=\"Refresh inventory data\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"mr-2 h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <path d=\"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2\"/>\r\n            </svg>\r\n            Refresh\r\n          </button>\r\n          <button\r\n            onClick={() => router.push('/DashView/advance-payment/view')}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center\"\r\n          >\r\n            <FileText className=\"mr-2 h-5 w-5\" />\r\n            View All Payments\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n      {/* Error message */}\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4\">\r\n          <span className=\"block sm:inline\">{error}</span>\r\n          <button\r\n            className=\"absolute top-0 bottom-0 right-0 px-4 py-3\"\r\n            onClick={() => setError(null)}\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Success message */}\r\n      {success && !showSuccessModal && (\r\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4\">\r\n          <span className=\"block sm:inline\">{success}</span>\r\n          <button\r\n            className=\"absolute top-0 bottom-0 right-0 px-4 py-3\"\r\n            onClick={() => setSuccess(null)}\r\n          >\r\n            <X size={18} />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Payment type selection */}\r\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-6\">\r\n        <h2 className=\"text-lg font-semibold mb-4\">Payment Type</h2>\r\n        <div className=\"flex space-x-4\">\r\n          <button\r\n            type=\"button\"\r\n            className={`flex items-center px-4 py-2 rounded-md ${\r\n              paymentType === PaymentType.INVENTORY_ITEM\r\n                ? 'bg-yellow-500 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n            onClick={() => handlePaymentTypeChange(PaymentType.INVENTORY_ITEM)}\r\n          >\r\n            <ShoppingBag className=\"mr-2\" size={18} />\r\n            Inventory Item\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className={`flex items-center px-4 py-2 rounded-md ${\r\n              paymentType === PaymentType.CUSTOM_ORDER\r\n                ? 'bg-yellow-500 text-white'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n            onClick={() => handlePaymentTypeChange(PaymentType.CUSTOM_ORDER)}\r\n          >\r\n            <Package className=\"mr-2\" size={18} />\r\n            Custom Order\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <form id=\"payment-form\" onSubmit={handleSubmit} className=\"bg-white p-6 rounded-lg shadow-md\">\r\n        {/* Item or Order Selection */}\r\n        {paymentType === PaymentType.INVENTORY_ITEM ? (\r\n          <div className=\"mb-6 space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Category\r\n              </label>\r\n              <div className=\"relative\">\r\n                <select\r\n                  id=\"category\"\r\n                  className=\"block w-full p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\r\n                  value={selectedCategory}\r\n                  onChange={handleCategoryChange}\r\n                >\r\n                  {categories.map(category => (\r\n                    <option key={category} value={category}>\r\n                      {category}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"item\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Item\r\n              </label>\r\n              <div className=\"relative\">\r\n                <select\r\n                  id=\"item\"\r\n                  className=\"block w-full p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\r\n                  value={selectedItemId || ''}\r\n                  onChange={handleItemChange}\r\n                >\r\n                  <option value=\"\">Select an item</option>\r\n                  {filteredItems.map(item => (\r\n                    <option key={item.item_id} value={item.item_id}>\r\n                      {item.product_title} - {formatCurrency(item.selling_price)} ({item.in_stock} in stock)\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {/* Show notification for additional payment */}\r\n              {selectedItem && new URLSearchParams(window.location.search).get('payment_id') && (\r\n                <div className=\"mt-2 p-2 bg-blue-50 text-blue-800 rounded-md text-sm\">\r\n                  <strong>Order Status: Partially Paid</strong>\r\n                  <br />\r\n                  <span>Current advance payment: {formatCurrency(parseFloat(new URLSearchParams(window.location.search).get('total_amount') || '0') - parseFloat(new URLSearchParams(window.location.search).get('balance') || '0'))}</span>\r\n                  <br />\r\n                  <span>Remaining balance: {formatCurrency(parseFloat(new URLSearchParams(window.location.search).get('balance') || '0'))}</span>\r\n                  <br />\r\n                  <span className=\"text-green-700\">Any amount entered below will be an additional payment.</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"quantity\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Quantity\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"quantity\"\r\n                min=\"1\"\r\n                className=\"block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\r\n                value={quantity}\r\n                onChange={handleQuantityChange}\r\n                disabled={!selectedItem}\r\n                max={selectedItem?.in_stock || 1}\r\n              />\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"mb-6\">\r\n            <label htmlFor=\"order\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Custom Order <span className=\"text-xs text-gray-500\">(Only showing orders that need payment)</span>\r\n            </label>\r\n            <div className=\"relative\">\r\n              <select\r\n                id=\"order\"\r\n                className=\"block w-full p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\r\n                value={selectedOrderId || ''}\r\n                onChange={handleOrderChange}\r\n              >\r\n                <option value=\"\">Select a custom order</option>\r\n                {customOrders.length > 0 ? (\r\n                  customOrders.map(order => (\r\n                    <option key={order.order_id} value={order.order_id}>\r\n                      {order.order_reference} - {order.customer_name} - {formatCurrency(order.estimated_amount || order.total_amount)}\r\n                      {order.advance_amount && order.advance_amount > 0 ? ` (Advance: ${formatCurrency(order.advance_amount)})` : ''}\r\n                    </option>\r\n                  ))\r\n                ) : (\r\n                  <option value=\"\" disabled>No orders requiring payment found</option>\r\n               )}\r\n              </select>\r\n            </div>\r\n\r\n            {selectedOrder && (\r\n              <div className=\"mt-2 p-2 bg-blue-50 text-blue-800 rounded-md text-sm\">\r\n                <strong>Order Status:</strong> {selectedOrder.payment_status || 'Not Paid'}\r\n                <br />\r\n                <strong>Current advance payment:</strong> {formatCurrency(selectedOrder.actual_advance_amount || selectedOrder.advance_amount || 0)}\r\n                <br />\r\n                <strong>Remaining balance:</strong> {formatCurrency(selectedOrder.actual_balance_amount || (selectedOrder.estimated_amount - (selectedOrder.advance_amount || 0)) || 0)}\r\n                <br />\r\n                <span className=\"text-green-700\">Any amount entered below will be an additional payment.</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Customer Information */}\r\n        <div className=\"mb-6\">\r\n          <label htmlFor=\"customerName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Customer Name\r\n          </label>\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <User className=\"h-5 w-5 text-gray-400\" />\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              id=\"customerName\"\r\n              className=\"block w-full pl-10 p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\r\n              placeholder=\"Enter customer name\"\r\n              value={customerName}\r\n              onChange={(e) => setCustomerName(e.target.value)}\r\n              readOnly={paymentType === PaymentType.CUSTOM_ORDER && !!selectedOrder}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Payment Details */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n          <div>\r\n            <label htmlFor=\"totalAmount\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Total Amount\r\n            </label>\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <LKRIcon className=\"h-5 w-5 text-gray-400\" />\r\n              </div>\r\n              <input\r\n                type=\"number\"\r\n                id=\"totalAmount\"\r\n                className=\"block w-full pl-10 p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\r\n                placeholder=\"0.00\"\r\n                value={totalAmount || ''}\r\n                onChange={(e) => setTotalAmount(parseFloat(e.target.value) || 0)}\r\n                readOnly={\r\n                  (paymentType === PaymentType.INVENTORY_ITEM && !!selectedItem) ||\r\n                  (paymentType === PaymentType.CUSTOM_ORDER && !!selectedOrder)\r\n                }\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"advanceAmount\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Advance Amount\r\n            </label>\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <LKRIcon className=\"h-5 w-5 text-gray-400\" />\r\n              </div>\r\n              <input\r\n                type=\"number\"\r\n                id=\"advanceAmount\"\r\n                className=\"block w-full pl-10 p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\r\n                placeholder=\"0.00\"\r\n                value={advanceAmount || ''}\r\n                onChange={(e) => {\r\n                  const newAdvance = parseFloat(e.target.value) || 0;\r\n                  setAdvanceAmount(newAdvance);\r\n\r\n                  // Check if this is an additional payment\r\n                  const paymentIdParam = new URLSearchParams(window.location.search).get('payment_id');\r\n                  const balanceParam = new URLSearchParams(window.location.search).get('balance');\r\n\r\n                  if (paymentIdParam && balanceParam) {\r\n                    // For additional payments, balance remains the same - we don't auto-update it\r\n                    // This matches the custom order behavior\r\n                    const remainingBalance = parseFloat(balanceParam);\r\n                    console.log(`Keeping balance at: ${remainingBalance} (not auto-updating)`);\r\n                  } else {\r\n                    // Standard calculation for new payments\r\n                    setBalanceAmount(totalAmount - newAdvance);\r\n                  }\r\n                }}\r\n                min=\"0\"\r\n                max={totalAmount}\r\n                step=\"0.01\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"balanceAmount\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Balance Amount\r\n            </label>\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <LKRIcon className=\"h-5 w-5 text-gray-400\" />\r\n              </div>\r\n              <input\r\n                type=\"number\"\r\n                id=\"balanceAmount\"\r\n                className=\"block w-full pl-10 p-2 border border-gray-300 rounded-md bg-gray-50 focus:ring-yellow-500 focus:border-yellow-500\"\r\n                value={balanceAmount || ''}\r\n                readOnly\r\n                // Add key to force re-render when balance changes\r\n                key={`balance-${balanceAmount}-${Date.now()}`}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"paymentMethod\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Payment Method\r\n            </label>\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <CreditCard className=\"h-5 w-5 text-gray-400\" />\r\n              </div>\r\n              <select\r\n                id=\"paymentMethod\"\r\n                className=\"block w-full pl-10 p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\r\n                value={paymentMethod}\r\n                onChange={(e) => setPaymentMethod(e.target.value)}\r\n              >\r\n                <option value=\"Cash\">Cash</option>\r\n                <option value=\"Credit Card\">Credit Card</option>\r\n                <option value=\"Debit Card\">Debit Card</option>\r\n                <option value=\"Bank Transfer\">Bank Transfer</option>\r\n                <option value=\"Cheque\">Cheque</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Notes */}\r\n        <div className=\"mb-6\">\r\n          <label htmlFor=\"notes\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Notes (Optional)\r\n          </label>\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <FileText className=\"h-5 w-5 text-gray-400\" />\r\n            </div>\r\n            <textarea\r\n              id=\"notes\"\r\n              className=\"block w-full pl-10 p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\r\n              placeholder=\"Add any additional notes here\"\r\n              value={notes}\r\n              onChange={(e) => setNotes(e.target.value)}\r\n              rows={3}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex justify-between\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleCancel}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-yellow-500 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? 'Processing...' : 'Confirm Payment'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      {/* Success Modal */}\r\n      {showSuccessModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white p-8 rounded-lg shadow-lg max-w-md w-full\">\r\n            <div className=\"flex items-center justify-center mb-4 text-green-500\">\r\n              <CheckCircle size={48} />\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold text-center mb-4\">Payment Successful!</h2>\r\n            <p className=\"text-center mb-2\">Your advance payment has been processed successfully.</p>\r\n            {paymentReference && (\r\n              <p className=\"text-center font-semibold mb-6\">Reference: {paymentReference}</p>\r\n            )}\r\n            <div className=\"flex justify-center space-x-4\">\r\n              <button\r\n                onClick={() => {\r\n                  // Refresh the page to update inventory data\r\n                  window.location.reload();\r\n                }}\r\n                className=\"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600\"\r\n              >\r\n                Close\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  // Implement print functionality here\r\n                  window.print();\r\n                }}\r\n                className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300\"\r\n              >\r\n                Print Receipt\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdvancePaymentPage;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1792, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}