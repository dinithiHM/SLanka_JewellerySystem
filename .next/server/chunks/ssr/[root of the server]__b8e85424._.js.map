{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://D%3A/JewelleryWEBApp/front_end/src/utils/formatters.ts"],"sourcesContent":["/**\n * Format a number as currency\n * @param value The number to format\n * @param locale The locale to use for formatting (default: 'en-US')\n * @param currency The currency code (default: 'LKR')\n * @returns Formatted currency string\n */\nexport const formatCurrency = (\n  value: number | string,\n  locale: string = 'en-US',\n  currency: string = 'LKR'\n): string => {\n  // Convert to number if it's a string\n  const numericValue = typeof value === 'string' ? parseFloat(value) : value;\n\n  // Handle NaN values\n  if (isNaN(numericValue)) {\n    console.warn('Invalid value for currency formatting:', value);\n    return 'Rs. 0.00';\n  }\n\n  // Use the Sri Lankan Rupee symbol (Rs) instead of LKR text\n  return 'Rs. ' + new Intl.NumberFormat(locale, {\n    style: 'decimal',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(numericValue);\n};\n\n/**\n * Format a date string\n * @param dateString The date string to format\n * @param locale The locale to use for formatting (default: 'en-US')\n * @returns Formatted date string\n */\nexport const formatDate = (\n  dateString: string,\n  locale: string = 'en-US'\n): string => {\n  const date = new Date(dateString);\n  return new Intl.DateTimeFormat(locale, {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    hour12: true\n  }).format(date);\n};\n"],"names":[],"mappings":"AAAA;;;;;;CAMC;;;;AACM,MAAM,iBAAiB,CAC5B,OACA,SAAiB,OAAO,EACxB,WAAmB,KAAK;IAExB,qCAAqC;IACrC,MAAM,eAAe,OAAO,UAAU,WAAW,WAAW,SAAS;IAErE,oBAAoB;IACpB,IAAI,MAAM,eAAe;QACvB,QAAQ,IAAI,CAAC,0CAA0C;QACvD,OAAO;IACT;IAEA,2DAA2D;IAC3D,OAAO,SAAS,IAAI,KAAK,YAAY,CAAC,QAAQ;QAC5C,OAAO;QACP,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAQO,MAAM,aAAa,CACxB,YACA,SAAiB,OAAO;IAExB,MAAM,OAAO,IAAI,KAAK;IACtB,OAAO,IAAI,KAAK,cAAc,CAAC,QAAQ;QACrC,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;QACR,QAAQ;IACV,GAAG,MAAM,CAAC;AACZ","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file://D%3A/JewelleryWEBApp/front_end/src/app/DashView/assay-reports/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Pencil, Trash2, Search, Filter, Plus, Download, RefreshCw, Calendar, Eye } from 'lucide-react';\nimport html2canvas from 'html2canvas';\nimport jsPDF from 'jspdf';\nimport { formatDate } from '@/utils/formatters';\n\ninterface AssayReport {\n  report_id: number;\n  certificate_no: string;\n  report_date: string;\n  customer_name: string;\n  weight: number;\n  gold_percentage: number;\n  gold_concentration: number;\n  gold_carat: number;\n  sample_type: string;\n  remarks: string;\n  branch_id: number;\n  branch_name: string;\n  item_id?: number;\n}\n\ninterface MetalComposition {\n  composition_id: number;\n  report_id: number;\n  element_name: string;\n  element_symbol: string;\n  concentration: number;\n}\n\ninterface Branch {\n  branch_id: number;\n  branch_name: string;\n}\n\ninterface JewelleryItem {\n  item_id: number;\n  product_title: string;\n  category: string;\n  in_stock: number;\n  buying_price: number;\n  selling_price: number;\n  branch_id: number;\n  branch_name?: string;\n  gold_carat?: number;\n  weight?: number;\n}\n\nconst AssayReportsPage = () => {\n  const router = useRouter();\n  const [assayReports, setAssayReports] = useState<AssayReport[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [branchFilter, setBranchFilter] = useState<string>('All Branches');\n  const [userBranchId, setUserBranchId] = useState<number | null>(null);\n  const [userRole, setUserRole] = useState<string>('');\n  const [showForm, setShowForm] = useState<boolean>(false);\n  const [formMode, setFormMode] = useState<'add' | 'edit' | 'view'>('add');\n  const [currentReport, setCurrentReport] = useState<AssayReport | null>(null);\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);\n  const [jewelleryItems, setJewelleryItems] = useState<JewelleryItem[]>([]);\n  const [selectedItemId, setSelectedItemId] = useState<number | null>(null);\n  const [loadingItems, setLoadingItems] = useState<boolean>(false);\n\n  // Form state\n  const [certificateNo, setCertificateNo] = useState<string>('');\n  const [reportDate, setReportDate] = useState<string>('');\n  const [customerName, setCustomerName] = useState<string>('');\n  const [weight, setWeight] = useState<number>(0);\n  const [goldPercentage, setGoldPercentage] = useState<number>(0);\n  const [goldConcentration, setGoldConcentration] = useState<number>(0);\n  const [goldCarat, setGoldCarat] = useState<number>(0);\n  const [sampleType, setSampleType] = useState<string>('');\n  const [remarks, setRemarks] = useState<string>('');\n  const [branchId, setBranchId] = useState<number | null>(null);\n  const [compositions, setCompositions] = useState<MetalComposition[]>([]);\n\n  // Metadata for linking to jewellery item\n  const [isHomogeneous, setIsHomogeneous] = useState<boolean>(true);\n  const [hasSolder, setHasSolder] = useState<boolean>(false);\n  const [solderQuality, setSolderQuality] = useState<string>('');\n\n  // Check authentication and get user info from localStorage\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      console.log('No authentication token found, redirecting to login');\n      router.push('/login');\n      return;\n    }\n\n    // Verify token with the server\n    const verifyToken = async () => {\n      try {\n        const response = await fetch('http://localhost:3002/auth/verifyToken', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (!response.ok) {\n          throw new Error('Invalid token');\n        }\n\n        setIsAuthenticated(true);\n\n        // Get user info\n        const userInfo = localStorage.getItem('userInfo');\n        if (userInfo) {\n          try {\n            const parsedUserInfo = JSON.parse(userInfo);\n            setUserBranchId(parsedUserInfo.branch_id || null);\n            setUserRole(parsedUserInfo.role || '');\n          } catch (err) {\n            console.error('Error parsing user info:', err);\n          }\n        } else {\n          // Fallback to individual items if userInfo is not available\n          setUserRole(localStorage.getItem('role') || '');\n          const branchId = localStorage.getItem('branchId');\n          setUserBranchId(branchId ? parseInt(branchId) : null);\n        }\n      } catch (err) {\n        console.error('Authentication error:', err);\n        localStorage.removeItem('token');\n        router.push('/login');\n      }\n    };\n\n    verifyToken();\n  }, [router]);\n\n  // Fetch branches\n  useEffect(() => {\n    console.log('Branch fetch effect running, isAuthenticated:', isAuthenticated);\n    if (!isAuthenticated) return;\n\n    const fetchBranches = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n\n        // Set default branches in case the API call fails\n        const defaultBranches = [\n          { branch_id: 1, branch_name: 'Mahiyanganaya Branch' },\n          { branch_id: 2, branch_name: 'Mahaoya Branch' }\n        ];\n\n        try {\n          const response = await fetch('http://localhost:3002/branches', {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log('Fetched branches:', data);\n            setBranches(data);\n          } else {\n            console.warn(`Failed to fetch branches: ${response.status}, using default branches`);\n            setBranches(defaultBranches);\n          }\n        } catch (fetchErr) {\n          console.warn('Error fetching branches, using default branches:', fetchErr);\n          setBranches(defaultBranches);\n        }\n\n        // Log the branches state after setting\n        setTimeout(() => {\n          console.log('Branches state:', branches);\n        }, 100);\n      } catch (err) {\n        console.error('Error in branch fetch effect:', err);\n        setError(err instanceof Error ? err.message : 'An unknown error occurred');\n      }\n    };\n\n    fetchBranches();\n  }, [isAuthenticated]);\n\n  // Fetch jewellery items\n  useEffect(() => {\n    if (!isAuthenticated) return;\n\n    const fetchJewelleryItems = async () => {\n      try {\n        setLoadingItems(true);\n\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n\n        // Try fetching from the jewellery-items endpoint first\n        try {\n          // Construct URL with query parameters for branch filtering\n          let url = 'http://localhost:3002/jewellery-items';\n          const params = new URLSearchParams();\n\n          if (userBranchId && (!userRole || userRole.toLowerCase() !== 'admin')) {\n            params.append('branch_id', userBranchId.toString());\n          }\n\n          if (params.toString()) {\n            url += `?${params.toString()}`;\n          }\n\n          console.log('Fetching jewellery items from:', url);\n          const response = await fetch(url, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log('Fetched jewellery items:', data.length);\n\n            // Ensure numeric fields are properly parsed\n            const parsedData = data.map((item: any) => ({\n              ...item,\n              weight: parseFloat(item.weight) || 0,\n              gold_carat: parseFloat(item.gold_carat) || 0\n            }));\n\n            setJewelleryItems(parsedData);\n            return; // Exit if successful\n          }\n          console.warn(`Failed to fetch from jewellery-items endpoint: ${response.status}, trying available-items endpoint`);\n        } catch (err) {\n          console.warn('Error fetching from jewellery-items endpoint, trying available-items endpoint:', err);\n        }\n\n        // Fallback to the assay-reports/available-items endpoint\n        try {\n          let url = 'http://localhost:3002/assay-reports/available-items';\n          const params = new URLSearchParams();\n\n          if (userBranchId && userRole !== 'admin') {\n            params.append('branch_id', userBranchId.toString());\n          }\n\n          // Include all items, even those with assay reports\n          params.append('includeAll', 'true');\n\n          if (params.toString()) {\n            url += `?${params.toString()}`;\n          }\n\n          console.log('Fetching jewellery items from fallback URL:', url);\n          const response = await fetch(url, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log('Fetched jewellery items from fallback:', data.length);\n\n            // Ensure numeric fields are properly parsed\n            const parsedData = data.map((item: any) => ({\n              ...item,\n              weight: parseFloat(item.weight) || 0,\n              gold_carat: parseFloat(item.gold_carat) || 0\n            }));\n\n            setJewelleryItems(parsedData);\n          } else {\n            console.warn(`Failed to fetch from fallback endpoint: ${response.status}`);\n            // Set empty array as fallback\n            setJewelleryItems([]);\n          }\n        } catch (fallbackErr) {\n          console.error('Error fetching jewellery items from fallback endpoint:', fallbackErr);\n          // Set empty array as fallback\n          setJewelleryItems([]);\n        }\n      } catch (err) {\n        console.error('Error in jewellery items fetch effect:', err);\n      } finally {\n        setLoadingItems(false);\n      }\n    };\n\n    fetchJewelleryItems();\n  }, [isAuthenticated, userBranchId, userRole]);\n\n  // Fetch assay reports\n  useEffect(() => {\n    if (!isAuthenticated) return;\n    const fetchAssayReports = async () => {\n      try {\n        setLoading(true);\n\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n\n        // Construct URL with query parameters for branch filtering\n        let url = 'http://localhost:3002/assay-reports';\n        const params = new URLSearchParams();\n\n        if (userBranchId && userRole !== 'admin') {\n          params.append('branch_id', userBranchId.toString());\n        }\n\n        if (params.toString()) {\n          url += `?${params.toString()}`;\n        }\n\n        console.log('Fetching assay reports from:', url);\n        const response = await fetch(url, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          console.log('Fetched assay reports:', data.length);\n\n          // Ensure numeric fields are properly parsed\n          const parsedData = data.map((report: any) => ({\n            ...report,\n            weight: parseFloat(report.weight) || 0,\n            gold_percentage: parseFloat(report.gold_percentage) || 0,\n            gold_concentration: parseFloat(report.gold_concentration) || 0,\n            gold_carat: parseFloat(report.gold_carat) || 0\n          }));\n\n          setAssayReports(parsedData);\n        } else {\n          console.warn(`Failed to fetch assay reports: ${response.status}, setting empty array`);\n          setAssayReports([]);\n          if (response.status === 403) {\n            setError('You do not have permission to view assay reports. Please contact your administrator.');\n          } else {\n            setError(`Failed to fetch assay reports: ${response.status}`);\n          }\n        }\n      } catch (err) {\n        console.error('Error fetching assay reports:', err);\n        setError(err instanceof Error ? err.message : 'An unknown error occurred');\n        setAssayReports([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAssayReports();\n  }, [isAuthenticated, userBranchId, userRole]);\n\n  // Filter assay reports based on search term and branch filter\n  const filteredReports = assayReports.filter(report => {\n    const matchesSearch =\n      report.certificate_no.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (report.customer_name && report.customer_name.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (report.sample_type && report.sample_type.toLowerCase().includes(searchTerm.toLowerCase()));\n\n    const matchesBranch =\n      branchFilter === 'All Branches' ||\n      (report.branch_name && report.branch_name === branchFilter);\n\n    return matchesSearch && matchesBranch;\n  });\n\n  // Handle item selection\n  const handleItemSelection = (itemId: number | null) => {\n    setSelectedItemId(itemId);\n\n    if (!itemId) {\n      // If no item selected, don't auto-populate fields\n      return;\n    }\n\n    // Find the selected item\n    const selectedItem = jewelleryItems.find(item => item.item_id === itemId);\n    if (!selectedItem) return;\n\n    // Auto-populate fields from the selected item\n    if (selectedItem.weight) {\n      setWeight(selectedItem.weight);\n    }\n\n    if (selectedItem.gold_carat) {\n      setGoldCarat(selectedItem.gold_carat);\n      // Approximate gold percentage based on carat (24K = 99.9%)\n      const approximatePercentage = (selectedItem.gold_carat / 24) * 99.9;\n      setGoldPercentage(parseFloat(approximatePercentage.toFixed(2)));\n      setGoldConcentration(parseFloat(approximatePercentage.toFixed(2)));\n    }\n\n    // Set sample type based on category\n    setSampleType(selectedItem.category);\n\n    // Set branch ID\n    if (selectedItem.branch_id) {\n      setBranchId(selectedItem.branch_id);\n    }\n  };\n\n  // Handle add new report\n  const handleAddNewReport = () => {\n    setCurrentReport(null);\n    setCertificateNo('');\n    setReportDate(new Date().toISOString().split('T')[0]);\n    setCustomerName('');\n    setWeight(0);\n    setGoldPercentage(0);\n    setGoldConcentration(0);\n    setGoldCarat(0);\n    setSampleType('');\n    setRemarks('');\n    setSelectedItemId(null);\n    setIsHomogeneous(true);\n    setHasSolder(false);\n    setSolderQuality('');\n\n    // Set branch ID based on user role and branch\n    if (userRole !== 'admin') {\n      // For non-admin users, set to their branch\n      setBranchId(userBranchId);\n      console.log('Setting branch ID to user branch:', userBranchId);\n    } else {\n      // For admin, default to branch 2 (Mahaoya Branch)\n      setBranchId(2); // Default to Mahaoya Branch\n      console.log('Admin user - setting default branch ID to 2 (Mahaoya Branch)');\n    }\n    setCompositions([\n      { composition_id: 0, report_id: 0, element_name: 'SILVER', element_symbol: 'Ag', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'COPPER', element_symbol: 'Cu', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'ZINC', element_symbol: 'Zn', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'NICKEL', element_symbol: 'Ni', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'PALLADIUM', element_symbol: 'Pd', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'CADMIUM', element_symbol: 'Cd', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'IRIDIUM', element_symbol: 'Ir', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'INDIUM', element_symbol: 'In', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'RUTHENIUM', element_symbol: 'Ru', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'RHODIUM', element_symbol: 'Rh', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'TUNGSTEN', element_symbol: 'W', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'TIN', element_symbol: 'Sn', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'LEAD', element_symbol: 'Pb', concentration: 0 },\n      { composition_id: 0, report_id: 0, element_name: 'PLATINUM', element_symbol: 'Pt', concentration: 0 }\n    ]);\n    setFormMode('add');\n    setShowForm(true);\n  };\n\n  // Handle view report\n  const handleViewReport = async (reportId: number) => {\n    try {\n      setLoading(true);\n\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      const response = await fetch(`http://localhost:3002/assay-reports/${reportId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch report details: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      // Ensure numeric fields are properly parsed\n      const parsedData = {\n        ...data,\n        weight: parseFloat(data.weight) || 0,\n        gold_percentage: parseFloat(data.gold_percentage) || 0,\n        gold_concentration: parseFloat(data.gold_concentration) || 0,\n        gold_carat: parseFloat(data.gold_carat) || 0\n      };\n\n      setCurrentReport(parsedData);\n      setCertificateNo(parsedData.certificate_no);\n      setReportDate(parsedData.report_date.split('T')[0]);\n      setCustomerName(parsedData.customer_name || '');\n      setWeight(parsedData.weight);\n      setGoldPercentage(parsedData.gold_percentage);\n      setGoldConcentration(parsedData.gold_concentration);\n      setGoldCarat(parsedData.gold_carat);\n      setSampleType(data.sample_type || '');\n      setRemarks(data.remarks || '');\n      setBranchId(data.branch_id);\n\n      // If compositions are available, use them\n      if (data.compositions && data.compositions.length > 0) {\n        // Ensure concentration is properly parsed as a number\n        const parsedCompositions = data.compositions.map((comp: any) => ({\n          ...comp,\n          concentration: typeof comp.concentration === 'number' ? comp.concentration : parseFloat(comp.concentration) || 0\n        }));\n        setCompositions(parsedCompositions);\n      } else {\n        // Fetch compositions separately\n        try {\n          const compResponse = await fetch(`http://localhost:3002/assay-reports/${reportId}/compositions`, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n\n          if (compResponse.ok) {\n            const compData = await compResponse.json();\n\n            // Ensure concentration is properly parsed as a number\n            const parsedCompData = compData.map((comp: any) => ({\n              ...comp,\n              concentration: typeof comp.concentration === 'number' ? comp.concentration : parseFloat(comp.concentration) || 0\n            }));\n\n            setCompositions(parsedCompData);\n          } else {\n            // If no compositions found, set default empty compositions\n            setCompositions([\n              { composition_id: 0, report_id: reportId, element_name: 'SILVER', element_symbol: 'Ag', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'COPPER', element_symbol: 'Cu', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'ZINC', element_symbol: 'Zn', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'NICKEL', element_symbol: 'Ni', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'PALLADIUM', element_symbol: 'Pd', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'CADMIUM', element_symbol: 'Cd', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'IRIDIUM', element_symbol: 'Ir', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'INDIUM', element_symbol: 'In', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'RUTHENIUM', element_symbol: 'Ru', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'RHODIUM', element_symbol: 'Rh', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'TUNGSTEN', element_symbol: 'W', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'TIN', element_symbol: 'Sn', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'LEAD', element_symbol: 'Pb', concentration: 0 },\n              { composition_id: 0, report_id: reportId, element_name: 'PLATINUM', element_symbol: 'Pt', concentration: 0 }\n            ]);\n          }\n        } catch (err) {\n          console.error('Error fetching compositions:', err);\n          // If error, set default empty compositions\n          setCompositions([\n            { composition_id: 0, report_id: reportId, element_name: 'SILVER', element_symbol: 'Ag', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'COPPER', element_symbol: 'Cu', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'ZINC', element_symbol: 'Zn', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'NICKEL', element_symbol: 'Ni', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'PALLADIUM', element_symbol: 'Pd', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'CADMIUM', element_symbol: 'Cd', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'IRIDIUM', element_symbol: 'Ir', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'INDIUM', element_symbol: 'In', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'RUTHENIUM', element_symbol: 'Ru', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'RHODIUM', element_symbol: 'Rh', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'TUNGSTEN', element_symbol: 'W', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'TIN', element_symbol: 'Sn', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'LEAD', element_symbol: 'Pb', concentration: 0 },\n            { composition_id: 0, report_id: reportId, element_name: 'PLATINUM', element_symbol: 'Pt', concentration: 0 }\n          ]);\n        }\n      }\n\n      // Set form mode to view (read-only)\n      setFormMode('view' as any);\n      setShowForm(true);\n    } catch (err) {\n      console.error('Error fetching report details:', err);\n      alert('Failed to load report details');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle edit report\n  const handleEditReport = async (reportId: number) => {\n    try {\n      setLoading(true);\n\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      const response = await fetch(`http://localhost:3002/assay-reports/${reportId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch report details: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      // Ensure numeric fields are properly parsed\n      const parsedData = {\n        ...data,\n        weight: parseFloat(data.weight) || 0,\n        gold_percentage: parseFloat(data.gold_percentage) || 0,\n        gold_concentration: parseFloat(data.gold_concentration) || 0,\n        gold_carat: parseFloat(data.gold_carat) || 0\n      };\n\n      setCurrentReport(parsedData);\n      setCertificateNo(parsedData.certificate_no);\n      setReportDate(parsedData.report_date.split('T')[0]);\n      setCustomerName(parsedData.customer_name || '');\n      setWeight(parsedData.weight);\n      setGoldPercentage(parsedData.gold_percentage);\n      setGoldConcentration(parsedData.gold_concentration);\n      setGoldCarat(parsedData.gold_carat);\n      setSampleType(data.sample_type || '');\n      setRemarks(data.remarks || '');\n      setBranchId(data.branch_id);\n\n      // If compositions are available, use them\n      if (data.compositions && data.compositions.length > 0) {\n        setCompositions(data.compositions);\n      } else {\n        // Fetch compositions separately\n        const compResponse = await fetch(`http://localhost:3002/assay-reports/${reportId}/compositions`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (compResponse.ok) {\n          const compData = await compResponse.json();\n\n          // Ensure concentration is properly parsed as a number\n          const parsedCompData = compData.map((comp: any) => ({\n            ...comp,\n            concentration: parseFloat(comp.concentration) || 0\n          }));\n\n          setCompositions(parsedCompData);\n        }\n      }\n\n      setFormMode('edit');\n      setShowForm(true);\n    } catch (err) {\n      console.error('Error fetching report details:', err);\n      alert('Failed to load report details');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle delete report\n  const handleDeleteReport = async (reportId: number) => {\n    if (!window.confirm('Are you sure you want to delete this assay report?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      const response = await fetch(`http://localhost:3002/assay-reports/delete/${reportId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete report');\n      }\n\n      // Refresh the list\n      let url = 'http://localhost:3002/assay-reports';\n      if (userRole !== 'admin' && userBranchId) {\n        url += `?branch_id=${userBranchId}`;\n      }\n      console.log('Refreshing assay reports from:', url);\n      const refreshResponse = await fetch(url, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (refreshResponse.ok) {\n        const data = await refreshResponse.json();\n\n        // Ensure numeric fields are properly parsed\n        const parsedData = data.map((report: any) => ({\n          ...report,\n          weight: parseFloat(report.weight) || 0,\n          gold_percentage: parseFloat(report.gold_percentage) || 0,\n          gold_concentration: parseFloat(report.gold_concentration) || 0,\n          gold_carat: parseFloat(report.gold_carat) || 0\n        }));\n\n        setAssayReports(parsedData);\n      } else {\n        // Fallback to client-side filtering if refresh fails\n        setAssayReports(assayReports.filter(report => report.report_id !== reportId));\n      }\n\n      alert('Assay report deleted successfully');\n    } catch (err) {\n      console.error('Error deleting report:', err);\n      alert('Failed to delete report');\n    }\n  };\n\n  // Handle form submission\n  const handleSubmitForm = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    // Don't submit if in view mode\n    if ((formMode as any) === 'view') {\n      return;\n    }\n\n    // Validate form\n    if ((formMode === 'edit' && !certificateNo) || !reportDate || weight <= 0 || goldPercentage <= 0 || goldCarat <= 0) {\n      alert('Please fill all required fields with valid values');\n      return;\n    }\n\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No authentication token found. Please log in again.');\n      return;\n    }\n\n    // Ensure branch_id is properly set\n    console.log('Submitting with branch_id:', branchId);\n\n    // Make sure branch_id is set to a valid value\n    let finalBranchId = branchId;\n    if (!finalBranchId) {\n      if (userRole !== 'admin') {\n        finalBranchId = userBranchId;\n      } else {\n        finalBranchId = 2; // Default to Mahaoya Branch\n      }\n    }\n\n    console.log('Final branch_id:', finalBranchId);\n\n    const reportData = {\n      ...(formMode === 'edit' && { certificate_no: certificateNo }),\n      report_date: reportDate,\n      customer_name: customerName,\n      weight,\n      gold_percentage: goldPercentage,\n      gold_concentration: goldConcentration || goldPercentage,\n      gold_carat: goldCarat,\n      sample_type: sampleType,\n      remarks,\n      branch_id: finalBranchId,\n      compositions: compositions.filter(comp => comp.concentration > 0),\n      // Include jewellery item ID if selected\n      item_id: selectedItemId,\n      // Include metadata for linking\n      is_homogeneous: isHomogeneous,\n      has_solder: hasSolder,\n      solder_quality: hasSolder ? solderQuality : null\n    };\n\n    console.log('Final report data:', reportData);\n\n    console.log('Submitting assay report data:', reportData);\n\n    try {\n      let response;\n\n      if (formMode === 'add') {\n        // Create new report\n        response = await fetch('http://localhost:3002/assay-reports/create', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(reportData)\n        });\n      } else {\n        // Update existing report\n        response = await fetch(`http://localhost:3002/assay-reports/update/${currentReport?.report_id}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(reportData)\n        });\n      }\n\n      if (!response.ok) {\n        throw new Error(`Failed to ${formMode} report`);\n      }\n\n      // Refresh the list\n      let url = 'http://localhost:3002/assay-reports';\n      if (userRole !== 'admin' && userBranchId) {\n        url += `?branch_id=${userBranchId}`;\n      }\n      console.log('Refreshing assay reports from:', url);\n      const refreshResponse = await fetch(url, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (refreshResponse.ok) {\n        const data = await refreshResponse.json();\n\n        // Ensure numeric fields are properly parsed\n        const parsedData = data.map((report: any) => ({\n          ...report,\n          weight: parseFloat(report.weight) || 0,\n          gold_percentage: parseFloat(report.gold_percentage) || 0,\n          gold_concentration: parseFloat(report.gold_concentration) || 0,\n          gold_carat: parseFloat(report.gold_carat) || 0\n        }));\n\n        setAssayReports(parsedData);\n      }\n\n      alert(`Assay report ${formMode === 'add' ? 'added' : 'updated'} successfully`);\n      setShowForm(false);\n    } catch (err) {\n      console.error(`Error ${formMode === 'add' ? 'adding' : 'updating'} report:`, err);\n      alert(`Failed to ${formMode} report`);\n    }\n  };\n\n  // Handle composition change\n  const handleCompositionChange = (index: number, value: number) => {\n    const updatedCompositions = [...compositions];\n    updatedCompositions[index].concentration = value;\n    setCompositions(updatedCompositions);\n  };\n\n  // Calculate total composition percentage\n  const totalComposition = compositions && compositions.length > 0\n    ? compositions.reduce((sum, comp) => {\n        // Ensure concentration is a valid number\n        const concentration = typeof comp.concentration === 'number'\n          ? comp.concentration\n          : parseFloat(comp.concentration) || 0;\n        return sum + concentration;\n      }, 0)\n    : 0;\n\n  // Handle PDF download\n  const handleDownloadPDF = () => {\n    // Create a simpler version of the report for PDF generation\n    const pdfContent = `\n      <html>\n      <head>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <style>\n          @page {\n            size: A4;\n            margin: 0;\n          }\n          body {\n            font-family: Arial, sans-serif;\n            padding: 20px;\n            width: 210mm; /* A4 width */\n            height: 297mm; /* A4 height */\n            margin: 0 auto;\n            line-height: 1.3;\n            font-size: 12px;\n            box-sizing: border-box;\n          }\n          h3 {\n            font-size: 16px;\n            font-weight: bold;\n            margin-bottom: 15px;\n          }\n          .report-container {\n            border: 1px solid #ddd;\n            border-radius: 8px;\n            padding: 20px;\n            margin-bottom: 20px;\n          }\n          .header {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: 20px;\n            align-items: center;\n          }\n          .title {\n            color: #D4AF37; /* Golden yellow color */\n            padding: 10px 20px;\n            font-size: 20px;\n            font-weight: bold;\n            text-align: left;\n          }\n          .subtitle {\n            text-align: right;\n          }\n          .subtitle-main {\n            font-weight: bold;\n            font-size: 14px;\n            margin-bottom: 3px;\n          }\n          .subtitle-sub {\n            font-size: 11px;\n          }\n          .info-section {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: 20px;\n          }\n          .info-left, .info-right {\n            width: 48%;\n          }\n          .info-right {\n            text-align: right;\n          }\n          .info-item {\n            margin-bottom: 8px;\n          }\n          .info-label {\n            font-weight: bold;\n          }\n          .box {\n            border: 1px solid #ddd;\n            border-radius: 5px;\n            padding: 15px;\n            margin-bottom: 15px;\n          }\n          .box-title {\n            font-weight: bold;\n            margin-bottom: 10px;\n          }\n          .composition-grid {\n            width: 100%;\n            margin-bottom: 15px;\n            display: flex;\n            justify-content: space-around;\n            text-align: center;\n          }\n          .composition-column {\n            flex: 1;\n            padding: 5px;\n          }\n          .element-name {\n            font-weight: bold;\n            font-size: 14px;\n            margin-bottom: 3px;\n          }\n          .element-symbol {\n            color: #555;\n            display: block;\n            margin-bottom: 3px;\n          }\n          .element-value {\n            font-size: 14px;\n          }\n          .gold-summary {\n            margin-top: 15px;\n            border-top: 1px solid #ddd;\n            padding-top: 10px;\n            text-align: left;\n          }\n          .gold-value {\n            font-weight: bold;\n            font-size: 16px;\n            margin-bottom: 5px;\n          }\n        </style>\n      </head>\n      <body>\n        <h3>ASSAY REPORT</h3>\n\n        <div class=\"report-container\">\n          <div class=\"header\">\n            <div class=\"title\">SLanka Jewellery</div>\n            <div class=\"subtitle\">\n              <div class=\"subtitle-main\">GOLD TESTING REPORT</div>\n              <div class=\"subtitle-sub\">Instant Gold Testing By Assay</div>\n            </div>\n          </div>\n\n          <div class=\"info-section\">\n            <div class=\"info-left\">\n              <div class=\"info-item\"><span class=\"info-label\">Name:</span> ${customerName}</div>\n              <div class=\"info-item\"><span class=\"info-label\">Weight:</span> ${weight.toFixed(3)}g</div>\n              <div class=\"info-item\"><span class=\"info-label\">Gold %:</span> ${goldPercentage.toFixed(2)}</div>\n            </div>\n            <div class=\"info-right\">\n              <div class=\"info-item\"><span class=\"info-label\">Date:</span> ${reportDate}</div>\n              <div class=\"info-item\"><span class=\"info-label\">Certificate No:</span> ${certificateNo}</div>\n              <div class=\"info-item\"><span class=\"info-label\">Sample:</span> ${sampleType}</div>\n            </div>\n          </div>\n\n          <div class=\"box\">\n            <div class=\"composition-grid\">\n              ${compositions\n                .filter(comp => comp.concentration > 0)\n                .map(comp => `\n                  <div class=\"composition-column\">\n                    <div class=\"element-name\">${comp.element_name}</div>\n                    <div class=\"element-symbol\">${comp.element_symbol}</div>\n                    <div class=\"element-value\">${comp.concentration.toFixed(2)}</div>\n                  </div>\n                `).join('')}\n            </div>\n\n            <div class=\"gold-summary\">\n              <div class=\"gold-value\">GOLD (Au): ${goldPercentage.toFixed(2)}%</div>\n              <div class=\"gold-value\">CARAT: ${goldCarat.toFixed(2)}K</div>\n            </div>\n          </div>\n\n          <div class=\"box\">\n            <div class=\"box-title\">DETAILS OF THE ARTICLE:</div>\n            <div>${sampleType} - ${weight.toFixed(3)}g</div>\n          </div>\n\n          ${remarks ? `\n            <div class=\"box\">\n              <div class=\"box-title\">Remarks:</div>\n              <div>${remarks}</div>\n            </div>\n          ` : ''}\n        </div>\n      </body>\n      </html>\n    `;\n\n    // Create a temporary iframe to render the content\n    const iframe = document.createElement('iframe');\n    iframe.style.visibility = 'hidden';\n    document.body.appendChild(iframe);\n    const iframeDoc = iframe.contentDocument || iframe.contentWindow?.document;\n\n    if (iframeDoc) {\n      iframeDoc.open();\n      iframeDoc.write(pdfContent);\n      iframeDoc.close();\n\n      // Wait for content to load\n      setTimeout(() => {\n        // @ts-ignore - TypeScript doesn't recognize the constructor parameters\n        const pdf = new jsPDF('p', 'mm', 'a4');\n\n        // Use html2canvas on the iframe's body\n        html2canvas(iframeDoc.body).then(canvas => {\n          const imgData = canvas.toDataURL('image/png');\n          const imgWidth = 210; // A4 width in mm\n          const imgHeight = canvas.height * imgWidth / canvas.width;\n\n          // @ts-ignore - TypeScript doesn't recognize these parameters\n          pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n          pdf.save(`Assay_Report_${certificateNo}.pdf`);\n\n          // Clean up\n          document.body.removeChild(iframe);\n        });\n      }, 500);\n    }\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Assay Reports</h1>\n\n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          <p>{error}</p>\n        </div>\n      )}\n\n      <div className=\"flex flex-col md:flex-row justify-between mb-4 gap-2\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              placeholder=\"Search reports...\"\n              className=\"pl-8 pr-4 py-2 border rounded-md\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-gray-400\" />\n          </div>\n\n          {/* Only show branch filter for admin users */}\n          {userRole && userRole.toLowerCase() === 'admin' && (\n            <div className=\"relative\">\n              <select\n                className=\"pl-8 pr-4 py-2 border rounded-md appearance-none\"\n                value={branchFilter}\n                onChange={async (e) => {\n                  const selectedBranchName = e.target.value;\n                  setBranchFilter(selectedBranchName);\n\n                  // If admin user, fetch data with branch filter\n                  if (userRole && userRole.toLowerCase() === 'admin' && isAuthenticated) {\n                    try {\n                      setLoading(true);\n\n                      const token = localStorage.getItem('token');\n                      if (!token) {\n                        throw new Error('No authentication token found');\n                      }\n\n                      // Construct URL with query parameters for branch filtering\n                      let url = 'http://localhost:3002/assay-reports';\n                      const params = new URLSearchParams();\n\n                      // Only add branch filter if not 'All Branches'\n                      if (selectedBranchName !== 'All Branches') {\n                        // Find the branch_id for the selected branch name\n                        const selectedBranch = branches.find(branch => branch.branch_name === selectedBranchName);\n                        if (selectedBranch) {\n                          params.append('branch_id', selectedBranch.branch_id.toString());\n                          console.log('Setting branch ID from filter:', selectedBranch.branch_id);\n                          setUserBranchId(selectedBranch.branch_id);\n                        }\n                      } else {\n                        // Reset to user's original branch ID if selecting All Branches\n                        const originalBranchId = localStorage.getItem('branchId');\n                        setUserBranchId(originalBranchId ? parseInt(originalBranchId) : null);\n                      }\n\n                      if (params.toString()) {\n                        url += `?${params.toString()}`;\n                      }\n\n                      console.log('Fetching assay reports with branch filter from:', url);\n                      const response = await fetch(url, {\n                        headers: {\n                          'Authorization': `Bearer ${token}`\n                        }\n                      });\n\n                      if (response.ok) {\n                        const data = await response.json();\n                        console.log('Fetched assay reports with branch filter:', data.length);\n\n                        // Ensure numeric fields are properly parsed\n                        const parsedData = data.map((report: any) => ({\n                          ...report,\n                          weight: parseFloat(report.weight) || 0,\n                          gold_percentage: parseFloat(report.gold_percentage) || 0,\n                          gold_concentration: parseFloat(report.gold_concentration) || 0,\n                          gold_carat: parseFloat(report.gold_carat) || 0\n                        }));\n\n                        setAssayReports(parsedData);\n                      }\n                    } catch (err) {\n                      console.error('Error fetching assay reports with branch filter:', err);\n                    } finally {\n                      setLoading(false);\n                    }\n                  }\n                }}\n              >\n                <option value=\"All Branches\">All Branches</option>\n                {branches.map((branch) => (\n                  <option key={branch.branch_id} value={branch.branch_name}>\n                    {branch.branch_name}\n                  </option>\n                ))}\n              </select>\n              <Filter className=\"absolute left-2 top-2.5 h-4 w-4 text-gray-400\" />\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex gap-2\">\n          <button\n            className=\"flex items-center gap-1 bg-blue-500 text-white px-3 py-2 rounded-md hover:bg-blue-600\"\n            onClick={handleAddNewReport}\n          >\n            <Plus className=\"h-4 w-4\" />\n            Add New Report\n          </button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"flex justify-center items-center h-64\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n        </div>\n      ) : (\n        <>\n          {filteredReports.length === 0 ? (\n            <div className=\"bg-gray-100 p-4 rounded-md text-center\">\n              <p>No assay reports found.</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full bg-white border border-gray-200 rounded-md\">\n                <thead className=\"bg-gray-100\">\n                  <tr>\n                    <th className=\"py-2 px-4 border-b text-left\">Certificate No</th>\n                    <th className=\"py-2 px-4 border-b text-left\">Date</th>\n                    <th className=\"py-2 px-4 border-b text-left\">Customer</th>\n                    <th className=\"py-2 px-4 border-b text-left\">Sample Type</th>\n                    <th className=\"py-2 px-4 border-b text-left\">Weight (g)</th>\n                    <th className=\"py-2 px-4 border-b text-left\">Gold %</th>\n                    <th className=\"py-2 px-4 border-b text-left\">Carat</th>\n                    <th className=\"py-2 px-4 border-b text-left\">Branch</th>\n                    <th className=\"py-2 px-4 border-b text-left\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredReports.map((report) => (\n                    <tr key={report.report_id} className=\"hover:bg-gray-50\">\n                      <td className=\"py-2 px-4 border-b\">{report.certificate_no}</td>\n                      <td className=\"py-2 px-4 border-b\">{formatDate(report.report_date)}</td>\n                      <td className=\"py-2 px-4 border-b\">{report.customer_name || '-'}</td>\n                      <td className=\"py-2 px-4 border-b\">{report.sample_type || '-'}</td>\n                      <td className=\"py-2 px-4 border-b\">{typeof report.weight === 'number' ? report.weight.toFixed(3) : (parseFloat(report.weight) || 0).toFixed(3)}</td>\n                      <td className=\"py-2 px-4 border-b\">{typeof report.gold_percentage === 'number' ? report.gold_percentage.toFixed(2) : (parseFloat(report.gold_percentage) || 0).toFixed(2)}%</td>\n                      <td className=\"py-2 px-4 border-b\">{typeof report.gold_carat === 'number' ? report.gold_carat.toFixed(2) : (parseFloat(report.gold_carat) || 0).toFixed(2)}K</td>\n                      <td className=\"py-2 px-4 border-b\">{report.branch_name || '-'}</td>\n                      <td className=\"py-2 px-4 border-b\">\n                        <div className=\"flex gap-2\">\n                          <button\n                            className=\"text-green-500 hover:text-green-700\"\n                            onClick={() => handleViewReport(report.report_id)}\n                            title=\"View Details\"\n                          >\n                            <Eye className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            className=\"text-blue-500 hover:text-blue-700\"\n                            onClick={() => handleEditReport(report.report_id)}\n                            title=\"Edit\"\n                          >\n                            <Pencil className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            className=\"text-red-500 hover:text-red-700\"\n                            onClick={() => handleDeleteReport(report.report_id)}\n                            title=\"Delete\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </>\n      )}\n\n      {/* Add/Edit Form Modal */}\n      {showForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <h2 className=\"text-xl font-bold mb-4\">\n              {formMode === 'add' ? 'Add New Assay Report' : formMode === 'edit' ? 'Edit Assay Report' : 'ASSAY REPORT'}\n            </h2>\n\n            {(formMode as any) === 'view' ? (\n              <div id=\"assay-report-view\" className=\"bg-white p-6 rounded-lg border border-gray-300 mb-4\">\n                <h3 className=\"text-xl font-bold mb-4\">ASSAY REPORT</h3>\n\n                <div className=\"border border-gray-200 rounded-lg p-6 mb-6\">\n                  <div className=\"flex justify-between mb-6\">\n                    <div className=\"text-[#D4AF37] py-3 px-6 text-2xl font-bold\">\n                      SLanka Jewellery\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-bold text-lg\">GOLD TESTING REPORT</div>\n                      <div className=\"text-sm\">Instant Gold Testing By Assay</div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-6 mb-6\">\n                    <div>\n                      <div className=\"mb-2\"><span className=\"font-bold\">Name:</span> {customerName}</div>\n                      <div className=\"mb-2\"><span className=\"font-bold\">Weight:</span> {weight.toFixed(3)}g</div>\n                      <div className=\"mb-2\"><span className=\"font-bold\">Gold %:</span> {goldPercentage.toFixed(2)}</div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"mb-2\"><span className=\"font-bold\">Date:</span> {reportDate}</div>\n                      <div className=\"mb-2\"><span className=\"font-bold\">Certificate No:</span> {certificateNo}</div>\n                      <div className=\"mb-2\"><span className=\"font-bold\">Sample:</span> {sampleType}</div>\n                    </div>\n                  </div>\n\n                  <div className=\"border border-gray-200 rounded-md p-4 mb-6\">\n                    <div className=\"flex justify-around text-center\">\n                      {compositions.filter(comp => comp.concentration > 0).map((comp, index) => (\n                        <div key={index} className=\"mb-2\">\n                          <div className=\"font-bold text-base\">{comp.element_name}</div>\n                          <div className=\"text-gray-600\">{comp.element_symbol}</div>\n                          <div className=\"text-base\">{comp.concentration.toFixed(2)}</div>\n                        </div>\n                      ))}\n                    </div>\n\n                    <div className=\"mt-4 pt-4 border-t border-gray-200 text-left\">\n                      <div className=\"font-bold text-lg\">GOLD (Au): {goldPercentage.toFixed(2)}%</div>\n                      <div className=\"font-bold text-lg\">CARAT: {goldCarat.toFixed(2)}K</div>\n                    </div>\n                  </div>\n\n                  <div className=\"border border-gray-200 rounded-md p-4 mb-6\">\n                    <div className=\"font-bold mb-2\">DETAILS OF THE ARTICLE:</div>\n                    <div>{sampleType} - {weight.toFixed(3)}g</div>\n                  </div>\n\n                  {remarks && (\n                    <div className=\"border border-gray-200 rounded-md p-4 mb-6\">\n                      <div className=\"font-bold mb-2\">Remarks:</div>\n                      <div>{remarks}</div>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex justify-end gap-2 mt-4\">\n                  <button\n                    type=\"button\"\n                    className=\"px-4 py-2 bg-[#3b82f6] text-white rounded-md hover:bg-[#2563eb]\"\n                    onClick={() => handleDownloadPDF()}\n                  >\n                    <Download className=\"h-4 w-4 inline mr-1\" /> Download PDF\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"px-4 py-2 border rounded-md hover:bg-gray-100\"\n                    onClick={() => setShowForm(false)}\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            ) : (\n              <form onSubmit={handleSubmitForm}>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                {formMode === 'add' && (\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-sm font-medium mb-1\">\n                      Select Jewellery Item\n                    </label>\n                    <div className=\"flex gap-2\">\n                      <select\n                        className=\"w-full p-2 border rounded-md\"\n                        value={selectedItemId || ''}\n                        onChange={(e) => handleItemSelection(e.target.value ? parseInt(e.target.value) : null)}\n                      >\n                        <option value=\"\">-- Select an item --</option>\n                        {jewelleryItems.map((item) => (\n                          <option key={item.item_id} value={item.item_id}>\n                            {item.product_title} - {item.category} {item.weight ? `(${item.weight}g)` : ''}\n                          </option>\n                        ))}\n                      </select>\n                      {loadingItems && (\n                        <div className=\"flex items-center\">\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500\"></div>\n                        </div>\n                      )}\n                    </div>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      Selecting an item will auto-populate weight, carat, and other details\n                    </p>\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Certificate No <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full p-2 border rounded-md bg-gray-100\"\n                    value={formMode === 'add' ? 'Will be generated automatically (AC-X)' : certificateNo}\n                    onChange={(e) => setCertificateNo(e.target.value)}\n                    disabled={formMode === 'add' || (formMode as any) === 'view'}\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Report Date <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full p-2 border rounded-md\"\n                    value={reportDate}\n                    onChange={(e) => setReportDate(e.target.value)}\n                    disabled={(formMode as any) === 'view'}\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Customer Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full p-2 border rounded-md\"\n                    value={customerName}\n                    onChange={(e) => setCustomerName(e.target.value)}\n                    disabled={(formMode as any) === 'view'}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Sample Type\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full p-2 border rounded-md\"\n                    value={sampleType}\n                    onChange={(e) => setSampleType(e.target.value)}\n                    disabled={(formMode as any) === 'view'}\n                    placeholder=\"e.g., BRACELET, NECKLACE\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Weight (g) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.001\"\n                    className=\"w-full p-2 border rounded-md\"\n                    value={weight}\n                    onChange={(e) => setWeight(parseFloat(e.target.value))}\n                    disabled={(formMode as any) === 'view'}\n                    required\n                    min=\"0.001\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Gold Percentage (%) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    className=\"w-full p-2 border rounded-md\"\n                    value={goldPercentage}\n                    onChange={(e) => setGoldPercentage(parseFloat(e.target.value))}\n                    disabled={(formMode as any) === 'view'}\n                    required\n                    min=\"0.01\"\n                    max=\"100\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Gold Concentration (%)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    className=\"w-full p-2 border rounded-md\"\n                    value={goldConcentration}\n                    onChange={(e) => setGoldConcentration(parseFloat(e.target.value))}\n                    disabled={(formMode as any) === 'view'}\n                    min=\"0\"\n                    max=\"100\"\n                    placeholder=\"Same as Gold Percentage if not specified\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Gold Carat (K) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    className=\"w-full p-2 border rounded-md\"\n                    value={goldCarat}\n                    onChange={(e) => setGoldCarat(parseFloat(e.target.value))}\n                    disabled={(formMode as any) === 'view'}\n                    required\n                    min=\"0.01\"\n                    max=\"24\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Branch\n                  </label>\n                  <select\n                    className=\"w-full p-2 border rounded-md\"\n                    value={branchId || ''}\n                    onChange={(e: React.ChangeEvent<HTMLSelectElement>) => setBranchId(e.target.value ? parseInt(e.target.value) : null)}\n                    disabled={userRole !== 'admin' || (formMode as any) === 'view'}\n                  >\n                    <option value=\"\">Select Branch</option>\n                    <option value=\"1\">Mahiyanganaya Branch</option>\n                    <option value=\"2\">Mahaoya Branch</option>\n                  </select>\n                </div>\n\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium mb-1\">\n                    Remarks\n                  </label>\n                  <textarea\n                    className=\"w-full p-2 border rounded-md\"\n                    value={remarks}\n                    onChange={(e) => setRemarks(e.target.value)}\n                    disabled={(formMode as any) === 'view'}\n                    rows={3}\n                  />\n                </div>\n              </div>\n\n              {/* Metadata section for linking to jewellery item */}\n              {selectedItemId && (\n                <div className=\"md:col-span-2 border-t pt-4 mt-2\">\n                  <h3 className=\"text-lg font-medium mb-2\">Item Metadata</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"is_homogeneous\"\n                        className=\"mr-2 h-4 w-4\"\n                        checked={isHomogeneous}\n                        onChange={(e) => setIsHomogeneous(e.target.checked)}\n                        disabled={(formMode as any) === 'view'}\n                      />\n                      <label htmlFor=\"is_homogeneous\" className=\"text-sm font-medium\">\n                        Is Homogeneous\n                      </label>\n                    </div>\n\n                    <div className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"has_solder\"\n                        className=\"mr-2 h-4 w-4\"\n                        checked={hasSolder}\n                        onChange={(e) => setHasSolder(e.target.checked)}\n                        disabled={(formMode as any) === 'view'}\n                      />\n                      <label htmlFor=\"has_solder\" className=\"text-sm font-medium\">\n                        Has Solder\n                      </label>\n                    </div>\n\n                    {hasSolder && (\n                      <div>\n                        <label className=\"block text-sm font-medium mb-1\">\n                          Solder Quality\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"w-full p-2 border rounded-md\"\n                          value={solderQuality}\n                          onChange={(e) => setSolderQuality(e.target.value)}\n                          disabled={(formMode as any) === 'view'}\n                          placeholder=\"e.g., Good, Fair, Poor\"\n                        />\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"mb-4 md:col-span-2 border-t pt-4 mt-2\">\n                <h3 className=\"text-lg font-medium mb-2\">Metal Composition</h3>\n                <p className=\"text-sm text-gray-500 mb-2\">\n                  Enter the percentage concentration of each metal element. Total: {typeof totalComposition === 'number' ? totalComposition.toFixed(2) : '0.00'}%\n                  {typeof totalComposition === 'number' && totalComposition > 100 && (\n                    <span className=\"text-red-500 ml-2\">Total exceeds 100%!</span>\n                  )}\n                </p>\n\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  {compositions.map((comp, index) => (\n                    <div key={index}>\n                      <label className=\"block text-sm font-medium mb-1\">\n                        {comp.element_name} ({comp.element_symbol})\n                      </label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        className=\"w-full p-2 border rounded-md\"\n                        value={comp.concentration}\n                        onChange={(e) => handleCompositionChange(index, parseFloat(e.target.value) || 0)}\n                        disabled={(formMode as any) === 'view'}\n                        min=\"0\"\n                        max=\"100\"\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-2\">\n                {(formMode as any) === 'view' ? (\n                  <button\n                    type=\"button\"\n                    className=\"px-4 py-2 border rounded-md hover:bg-gray-100\"\n                    onClick={() => setShowForm(false)}\n                  >\n                    Close\n                  </button>\n                ) : (\n                  <>\n                    <button\n                      type=\"button\"\n                      className=\"px-4 py-2 border rounded-md hover:bg-gray-100\"\n                      onClick={() => setShowForm(false)}\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      type=\"submit\"\n                      className=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                    >\n                      {formMode === 'add' ? 'Add Report' : 'Update Report'}\n                    </button>\n                  </>\n                )}\n              </div>\n            </form>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AssayReportsPage;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2832, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}