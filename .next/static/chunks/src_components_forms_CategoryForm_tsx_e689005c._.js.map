{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/JewelleryWEBApp/front_end/src/components/forms/CategoryForm.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\n\n// Define the form schema with Zod\nconst schema = z.object({\n  category_name: z.string().min(1, { message: \"Category name is required\" }),\n  description: z.string().optional(),\n});\n\ntype FormInputs = z.infer<typeof schema>;\n\ninterface CategoryFormProps {\n  type: \"create\" | \"update\" | \"view\";\n  data?: {\n    category_id?: number;\n    category_name?: string;\n    description?: string | null;\n  } | null;\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\nconst CategoryForm = ({ type, data, onSuccess, onCancel }: CategoryFormProps) => {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const { language } = useLanguage();\n\n  // Initialize form with react-hook-form\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<FormInputs>({\n    resolver: zodResolver(schema),\n    defaultValues: {\n      category_name: data?.category_name || \"\",\n      description: data?.description || \"\",\n    },\n  });\n\n  // Handle form submission\n  const onSubmit = async (formData: FormInputs) => {\n    setIsSubmitting(true);\n    setError(null);\n\n    try {\n      const url = type === \"create\"\n        ? \"http://localhost:3002/admin/add_category\"\n        : `http://localhost:3002/admin/edit_category/${data?.category_id}`;\n\n      const method = type === \"create\" ? \"POST\" : \"PUT\";\n\n      const response = await fetch(url, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(formData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to ${type} category: ${response.status}`);\n      }\n\n      const responseData = await response.json();\n      if (responseData.Status) {\n        onSuccess();\n      } else {\n        throw new Error(responseData.Error || `Failed to ${type} category`);\n      }\n    } catch (err: any) {\n      setError(err.message);\n      console.error(`Error ${type === \"create\" ? \"creating\" : \"updating\"} category:`, err);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // If in view mode, render a read-only view\n  if (type === \"view\") {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex justify-between items-center\">\n          <h2 className=\"text-xl font-semibold\">\n            {language === \"ta\" ? \"வகை விவரங்கள்\" : \"Category Details\"}\n          </h2>\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"text-gray-500 hover:text-gray-700\"\n          >\n            ✕\n          </button>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div>\n            <h3 className=\"text-sm font-medium text-gray-700 mb-1\">\n              {language === \"ta\" ? \"வகை ஐடி\" : \"Category ID\"}\n            </h3>\n            <p className=\"p-2 bg-gray-50 rounded-md\">{data?.category_id}</p>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-medium text-gray-700 mb-1\">\n              {language === \"ta\" ? \"வகை பெயர்\" : \"Category Name\"}\n            </h3>\n            <p className=\"p-2 bg-gray-50 rounded-md\">{data?.category_name}</p>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-medium text-gray-700 mb-1\">\n              {language === \"ta\" ? \"விளக்கம்\" : \"Description\"}\n            </h3>\n            <p className=\"p-2 bg-gray-50 rounded-md min-h-[80px]\">\n              {data?.description || \"-\"}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end pt-4\">\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n          >\n            {language === \"ta\" ? \"மூடு\" : \"Close\"}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // For create and update modes, render the form\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h2 className=\"text-xl font-semibold\">\n          {type === \"create\"\n            ? language === \"ta\" ? \"புதிய வகை உருவாக்கம்\" : \"Create New Category\"\n            : language === \"ta\" ? \"வகை விவரங்களைத் திருத்து\" : \"Edit Category Details\"}\n        </h2>\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"text-gray-500 hover:text-gray-700\"\n        >\n          ✕\n        </button>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 text-red-500 p-3 rounded-md text-sm\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            {language === \"ta\" ? \"வகை பெயர்\" : \"Category Name\"}*\n          </label>\n          <input\n            type=\"text\"\n            {...register(\"category_name\")}\n            className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\n          />\n          {errors.category_name && (\n            <p className=\"mt-1 text-sm text-red-500\">\n              {errors.category_name.message}\n            </p>\n          )}\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            {language === \"ta\" ? \"விளக்கம்\" : \"Description\"}\n          </label>\n          <textarea\n            {...register(\"description\")}\n            rows={4}\n            className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500\"\n          />\n          {errors.description && (\n            <p className=\"mt-1 text-sm text-red-500\">\n              {errors.description.message}\n            </p>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex justify-end space-x-3 pt-4\">\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n          disabled={isSubmitting}\n        >\n          {language === \"ta\" ? \"ரத்து செய்\" : \"Cancel\"}\n        </button>\n        <button\n          type=\"submit\"\n          className=\"px-4 py-2 bg-lamaYellow text-black rounded-md hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? (\n            <span>{language === \"ta\" ? \"சமர்ப்பிக்கிறது...\" : \"Submitting...\"}</span>\n          ) : (\n            <span>\n              {type === \"create\"\n                ? language === \"ta\" ? \"உருவாக்கு\" : \"Create\"\n                : language === \"ta\" ? \"புதுப்பி\" : \"Update\"}\n            </span>\n          )}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default CategoryForm;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}